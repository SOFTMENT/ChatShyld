"use strict";var ci=Object.create;var se=Object.defineProperty;var ui=Object.getOwnPropertyDescriptor;var fi=Object.getOwnPropertyNames;var li=Object.getPrototypeOf,hi=Object.prototype.hasOwnProperty;var l=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),pi=(e,r)=>{for(var t in r)se(e,t,{get:r[t],enumerable:!0})},vr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of fi(r))!hi.call(e,s)&&s!==t&&se(e,s,{get:()=>r[s],enumerable:!(n=ui(r,s))||n.enumerable});return e};var mi=(e,r,t)=>(t=e!=null?ci(li(e)):{},vr(r||!e||!e.__esModule?se(t,"default",{value:e,enumerable:!0}):t,e)),Ei=e=>vr(se({},"__esModule",{value:!0}),e);var C=l((Be,Lr)=>{var ie=require("buffer"),N=ie.Buffer;function $r(e,r){for(var t in e)r[t]=e[t]}N.from&&N.alloc&&N.allocUnsafe&&N.allocUnsafeSlow?Lr.exports=ie:($r(ie,Be),Be.Buffer=j);function j(e,r,t){return N(e,r,t)}j.prototype=Object.create(N.prototype);$r(N,j);j.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return N(e,r,t)};j.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=N(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};j.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return N(e)};j.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ie.SlowBuffer(e)}});var Ge=l((Ll,Or)=>{var oe=C().Buffer,di=require("stream"),yi=require("util");function ae(e){if(this.buffer=null,this.writable=!0,this.readable=!0,!e)return this.buffer=oe.alloc(0),this;if(typeof e.pipe=="function")return this.buffer=oe.alloc(0),e.pipe(this),this;if(e.length||typeof e=="object")return this.buffer=e,this.writable=!1,process.nextTick(function(){this.emit("end",e),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof e+")")}yi.inherits(ae,di);ae.prototype.write=function(r){this.buffer=oe.concat([this.buffer,oe.from(r)]),this.emit("data",r)};ae.prototype.end=function(r){r&&this.write(r),this.emit("end",r),this.emit("close"),this.writable=!1,this.readable=!1};Or.exports=ae});var qr=l((Ol,Nr)=>{"use strict";function Ve(e){var r=(e/8|0)+(e%8===0?0:1);return r}var Si={ES256:Ve(256),ES384:Ve(384),ES512:Ve(521)};function gi(e){var r=Si[e];if(r)return r;throw new Error('Unknown algorithm "'+e+'"')}Nr.exports=gi});var Br=l((Nl,Cr)=>{"use strict";var ce=C().Buffer,Pr=qr(),ue=128,jr=0,wi=32,Ii=16,Ri=2,_r=Ii|wi|jr<<6,fe=Ri|jr<<6;function bi(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Dr(e){if(ce.isBuffer(e))return e;if(typeof e=="string")return ce.from(e,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function Ti(e,r){e=Dr(e);var t=Pr(r),n=t+1,s=e.length,i=0;if(e[i++]!==_r)throw new Error('Could not find expected "seq"');var o=e[i++];if(o===(ue|1)&&(o=e[i++]),s-i<o)throw new Error('"seq" specified length of "'+o+'", only "'+(s-i)+'" remaining');if(e[i++]!==fe)throw new Error('Could not find expected "int" for "r"');var a=e[i++];if(s-i-2<a)throw new Error('"r" specified length of "'+a+'", only "'+(s-i-2)+'" available');if(n<a)throw new Error('"r" specified length of "'+a+'", max of "'+n+'" is acceptable');var f=i;if(i+=a,e[i++]!==fe)throw new Error('Could not find expected "int" for "s"');var u=e[i++];if(s-i!==u)throw new Error('"s" specified length of "'+u+'", expected "'+(s-i)+'"');if(n<u)throw new Error('"s" specified length of "'+u+'", max of "'+n+'" is acceptable');var h=i;if(i+=u,i!==s)throw new Error('Expected to consume entire buffer, but "'+(s-i)+'" bytes remain');var c=t-a,y=t-u,E=ce.allocUnsafe(c+a+y+u);for(i=0;i<c;++i)E[i]=0;e.copy(E,i,f+Math.max(-c,0),f+a),i=t;for(var w=i;i<w+y;++i)E[i]=0;return e.copy(E,i,h+Math.max(-y,0),h+u),E=E.toString("base64"),E=bi(E),E}function xr(e,r,t){for(var n=0;r+n<t&&e[r+n]===0;)++n;var s=e[r+n]>=ue;return s&&--n,n}function Ai(e,r){e=Dr(e);var t=Pr(r),n=e.length;if(n!==t*2)throw new TypeError('"'+r+'" signatures must be "'+t*2+'" bytes, saw "'+n+'"');var s=xr(e,0,t),i=xr(e,t,e.length),o=t-s,a=t-i,f=2+o+1+1+a,u=f<ue,h=ce.allocUnsafe((u?2:3)+f),c=0;return h[c++]=_r,u?h[c++]=f:(h[c++]=ue|1,h[c++]=f&255),h[c++]=fe,h[c++]=o,s<0?(h[c++]=0,c+=e.copy(h,c,0,t)):c+=e.copy(h,c,s,t),h[c++]=fe,h[c++]=a,i<0?(h[c++]=0,e.copy(h,c,t)):e.copy(h,c,t+i),h}Cr.exports={derToJose:Ti,joseToDer:Ai}});var Vr=l((ql,Gr)=>{"use strict";var X=require("buffer").Buffer,Fe=require("buffer").SlowBuffer;Gr.exports=le;function le(e,r){if(!X.isBuffer(e)||!X.isBuffer(r)||e.length!==r.length)return!1;for(var t=0,n=0;n<e.length;n++)t|=e[n]^r[n];return t===0}le.install=function(){X.prototype.equal=Fe.prototype.equal=function(r){return le(this,r)}};var vi=X.prototype.equal,$i=Fe.prototype.equal;le.restore=function(){X.prototype.equal=vi,Fe.prototype.equal=$i}});var Me=l((xl,Jr)=>{var G=C().Buffer,v=require("crypto"),kr=Br(),Fr=require("util"),Li=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,W="secret must be a string or buffer",B="key must be a string or a buffer",Oi="key must be a string, a buffer or an object",He=typeof v.createPublicKey=="function";He&&(B+=" or a KeyObject",W+="or a KeyObject");function Hr(e){if(!G.isBuffer(e)&&typeof e!="string"&&(!He||typeof e!="object"||typeof e.type!="string"||typeof e.asymmetricKeyType!="string"||typeof e.export!="function"))throw O(B)}function Ur(e){if(!G.isBuffer(e)&&typeof e!="string"&&typeof e!="object")throw O(Oi)}function Ni(e){if(!G.isBuffer(e)){if(typeof e=="string")return e;if(!He||typeof e!="object"||e.type!=="secret"||typeof e.export!="function")throw O(W)}}function Ue(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mr(e){e=e.toString();var r=4-e.length%4;if(r!==4)for(var t=0;t<r;++t)e+="=";return e.replace(/\-/g,"+").replace(/_/g,"/")}function O(e){var r=[].slice.call(arguments,1),t=Fr.format.bind(Fr,e).apply(null,r);return new TypeError(t)}function qi(e){return G.isBuffer(e)||typeof e=="string"}function K(e){return qi(e)||(e=JSON.stringify(e)),e}function Xr(e){return function(t,n){Ni(n),t=K(t);var s=v.createHmac("sha"+e,n),i=(s.update(t),s.digest("base64"));return Ue(i)}}var ke,xi="timingSafeEqual"in v?function(r,t){return r.byteLength!==t.byteLength?!1:v.timingSafeEqual(r,t)}:function(r,t){return ke||(ke=Vr()),ke(r,t)};function Pi(e){return function(t,n,s){var i=Xr(e)(t,s);return xi(G.from(n),G.from(i))}}function Wr(e){return function(t,n){Ur(n),t=K(t);var s=v.createSign("RSA-SHA"+e),i=(s.update(t),s.sign(n,"base64"));return Ue(i)}}function Kr(e){return function(t,n,s){Hr(s),t=K(t),n=Mr(n);var i=v.createVerify("RSA-SHA"+e);return i.update(t),i.verify(s,n,"base64")}}function ji(e){return function(t,n){Ur(n),t=K(t);var s=v.createSign("RSA-SHA"+e),i=(s.update(t),s.sign({key:n,padding:v.constants.RSA_PKCS1_PSS_PADDING,saltLength:v.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Ue(i)}}function _i(e){return function(t,n,s){Hr(s),t=K(t),n=Mr(n);var i=v.createVerify("RSA-SHA"+e);return i.update(t),i.verify({key:s,padding:v.constants.RSA_PKCS1_PSS_PADDING,saltLength:v.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function Di(e){var r=Wr(e);return function(){var n=r.apply(null,arguments);return n=kr.derToJose(n,"ES"+e),n}}function Ci(e){var r=Kr(e);return function(n,s,i){s=kr.joseToDer(s,"ES"+e).toString("base64");var o=r(n,s,i);return o}}function Bi(){return function(){return""}}function Gi(){return function(r,t){return t===""}}Jr.exports=function(r){var t={hs:Xr,rs:Wr,ps:ji,es:Di,none:Bi},n={hs:Pi,rs:Kr,ps:_i,es:Ci,none:Gi},s=r.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!s)throw O(Li,r);var i=(s[1]||s[3]).toLowerCase(),o=s[2];return{sign:t[i](o),verify:n[i](o)}}});var Xe=l((Pl,Yr)=>{var Vi=require("buffer").Buffer;Yr.exports=function(r){return typeof r=="string"?r:typeof r=="number"||Vi.isBuffer(r)?r.toString():JSON.stringify(r)}});var tt=l((jl,rt)=>{var Fi=C().Buffer,zr=Ge(),ki=Me(),Hi=require("stream"),Zr=Xe(),We=require("util");function Qr(e,r){return Fi.from(e,r).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ui(e,r,t){t=t||"utf8";var n=Qr(Zr(e),"binary"),s=Qr(Zr(r),t);return We.format("%s.%s",n,s)}function et(e){var r=e.header,t=e.payload,n=e.secret||e.privateKey,s=e.encoding,i=ki(r.alg),o=Ui(r,t,s),a=i.sign(o,n);return We.format("%s.%s",o,a)}function he(e){var r=e.secret||e.privateKey||e.key,t=new zr(r);this.readable=!0,this.header=e.header,this.encoding=e.encoding,this.secret=this.privateKey=this.key=t,this.payload=new zr(e.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}We.inherits(he,Hi);he.prototype.sign=function(){try{var r=et({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",r),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}};he.sign=et;rt.exports=he});var ht=l((_l,lt)=>{var st=C().Buffer,nt=Ge(),Mi=Me(),Xi=require("stream"),it=Xe(),Wi=require("util"),Ki=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function Ji(e){return Object.prototype.toString.call(e)==="[object Object]"}function Yi(e){if(Ji(e))return e;try{return JSON.parse(e)}catch{return}}function ot(e){var r=e.split(".",1)[0];return Yi(st.from(r,"base64").toString("binary"))}function zi(e){return e.split(".",2).join(".")}function at(e){return e.split(".")[2]}function Zi(e,r){r=r||"utf8";var t=e.split(".")[1];return st.from(t,"base64").toString(r)}function ct(e){return Ki.test(e)&&!!ot(e)}function ut(e,r,t){if(!r){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}e=it(e);var s=at(e),i=zi(e),o=Mi(r);return o.verify(i,s,t)}function ft(e,r){if(r=r||{},e=it(e),!ct(e))return null;var t=ot(e);if(!t)return null;var n=Zi(e);return(t.typ==="JWT"||r.json)&&(n=JSON.parse(n,r.encoding)),{header:t,payload:n,signature:at(e)}}function V(e){e=e||{};var r=e.secret||e.publicKey||e.key,t=new nt(r);this.readable=!0,this.algorithm=e.algorithm,this.encoding=e.encoding,this.secret=this.publicKey=this.key=t,this.signature=new nt(e.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}Wi.inherits(V,Xi);V.prototype.verify=function(){try{var r=ut(this.signature.buffer,this.algorithm,this.key.buffer),t=ft(this.signature.buffer,this.encoding);return this.emit("done",r,t),this.emit("data",r),this.emit("end"),this.readable=!1,r}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};V.decode=ft;V.isValid=ct;V.verify=ut;lt.exports=V});var me=l(x=>{var pt=tt(),pe=ht(),Qi=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];x.ALGORITHMS=Qi;x.sign=pt.sign;x.verify=pe.verify;x.decode=pe.decode;x.isValid=pe.isValid;x.createSign=function(r){return new pt(r)};x.createVerify=function(r){return new pe(r)}});var Ke=l((Cl,mt)=>{var eo=me();mt.exports=function(e,r){r=r||{};var t=eo.decode(e,r);if(!t)return null;var n=t.payload;if(typeof n=="string")try{var s=JSON.parse(n);s!==null&&typeof s=="object"&&(n=s)}catch{}return r.complete===!0?{header:t.header,payload:n,signature:t.signature}:n}});var J=l((Bl,Et)=>{var Ee=function(e,r){Error.call(this,e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=e,r&&(this.inner=r)};Ee.prototype=Object.create(Error.prototype);Ee.prototype.constructor=Ee;Et.exports=Ee});var Je=l((Gl,yt)=>{var dt=J(),de=function(e,r){dt.call(this,e),this.name="NotBeforeError",this.date=r};de.prototype=Object.create(dt.prototype);de.prototype.constructor=de;yt.exports=de});var Ye=l((Vl,gt)=>{var St=J(),ye=function(e,r){St.call(this,e),this.name="TokenExpiredError",this.expiredAt=r};ye.prototype=Object.create(St.prototype);ye.prototype.constructor=ye;gt.exports=ye});var It=l((Fl,wt)=>{var F=1e3,k=F*60,H=k*60,_=H*24,ro=_*7,to=_*365.25;wt.exports=function(e,r){r=r||{};var t=typeof e;if(t==="string"&&e.length>0)return no(e);if(t==="number"&&isFinite(e))return r.long?io(e):so(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function no(e){if(e=String(e),!(e.length>100)){var r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(r){var t=parseFloat(r[1]),n=(r[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*to;case"weeks":case"week":case"w":return t*ro;case"days":case"day":case"d":return t*_;case"hours":case"hour":case"hrs":case"hr":case"h":return t*H;case"minutes":case"minute":case"mins":case"min":case"m":return t*k;case"seconds":case"second":case"secs":case"sec":case"s":return t*F;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function so(e){var r=Math.abs(e);return r>=_?Math.round(e/_)+"d":r>=H?Math.round(e/H)+"h":r>=k?Math.round(e/k)+"m":r>=F?Math.round(e/F)+"s":e+"ms"}function io(e){var r=Math.abs(e);return r>=_?Se(e,r,_,"day"):r>=H?Se(e,r,H,"hour"):r>=k?Se(e,r,k,"minute"):r>=F?Se(e,r,F,"second"):e+" ms"}function Se(e,r,t,n){var s=r>=t*1.5;return Math.round(e/t)+" "+n+(s?"s":"")}});var ze=l((kl,Rt)=>{var oo=It();Rt.exports=function(e,r){var t=r||Math.floor(Date.now()/1e3);if(typeof e=="string"){var n=oo(e);return typeof n>"u"?void 0:Math.floor(t+n/1e3)}else return typeof e=="number"?t+e:void 0}});var Y=l((Hl,bt)=>{"use strict";var ao="2.0.0",co=Number.MAX_SAFE_INTEGER||9007199254740991,uo=16,fo=250,lo=["major","premajor","minor","preminor","patch","prepatch","prerelease"];bt.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:uo,MAX_SAFE_BUILD_LENGTH:fo,MAX_SAFE_INTEGER:co,RELEASE_TYPES:lo,SEMVER_SPEC_VERSION:ao,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var z=l((Ul,Tt)=>{"use strict";var ho=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};Tt.exports=ho});var U=l((q,At)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ze,MAX_SAFE_BUILD_LENGTH:po,MAX_LENGTH:mo}=Y(),Eo=z();q=At.exports={};var yo=q.re=[],So=q.safeRe=[],p=q.src=[],go=q.safeSrc=[],m=q.t={},wo=0,Qe="[a-zA-Z0-9-]",Io=[["\\s",1],["\\d",mo],[Qe,po]],Ro=e=>{for(let[r,t]of Io)e=e.split(`${r}*`).join(`${r}{0,${t}}`).split(`${r}+`).join(`${r}{1,${t}}`);return e},d=(e,r,t)=>{let n=Ro(r),s=wo++;Eo(e,s,r),m[e]=s,p[s]=r,go[s]=n,yo[s]=new RegExp(r,t?"g":void 0),So[s]=new RegExp(n,t?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*");d("NUMERICIDENTIFIERLOOSE","\\d+");d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Qe}*`);d("MAINVERSION",`(${p[m.NUMERICIDENTIFIER]})\\.(${p[m.NUMERICIDENTIFIER]})\\.(${p[m.NUMERICIDENTIFIER]})`);d("MAINVERSIONLOOSE",`(${p[m.NUMERICIDENTIFIERLOOSE]})\\.(${p[m.NUMERICIDENTIFIERLOOSE]})\\.(${p[m.NUMERICIDENTIFIERLOOSE]})`);d("PRERELEASEIDENTIFIER",`(?:${p[m.NONNUMERICIDENTIFIER]}|${p[m.NUMERICIDENTIFIER]})`);d("PRERELEASEIDENTIFIERLOOSE",`(?:${p[m.NONNUMERICIDENTIFIER]}|${p[m.NUMERICIDENTIFIERLOOSE]})`);d("PRERELEASE",`(?:-(${p[m.PRERELEASEIDENTIFIER]}(?:\\.${p[m.PRERELEASEIDENTIFIER]})*))`);d("PRERELEASELOOSE",`(?:-?(${p[m.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[m.PRERELEASEIDENTIFIERLOOSE]})*))`);d("BUILDIDENTIFIER",`${Qe}+`);d("BUILD",`(?:\\+(${p[m.BUILDIDENTIFIER]}(?:\\.${p[m.BUILDIDENTIFIER]})*))`);d("FULLPLAIN",`v?${p[m.MAINVERSION]}${p[m.PRERELEASE]}?${p[m.BUILD]}?`);d("FULL",`^${p[m.FULLPLAIN]}$`);d("LOOSEPLAIN",`[v=\\s]*${p[m.MAINVERSIONLOOSE]}${p[m.PRERELEASELOOSE]}?${p[m.BUILD]}?`);d("LOOSE",`^${p[m.LOOSEPLAIN]}$`);d("GTLT","((?:<|>)?=?)");d("XRANGEIDENTIFIERLOOSE",`${p[m.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);d("XRANGEIDENTIFIER",`${p[m.NUMERICIDENTIFIER]}|x|X|\\*`);d("XRANGEPLAIN",`[v=\\s]*(${p[m.XRANGEIDENTIFIER]})(?:\\.(${p[m.XRANGEIDENTIFIER]})(?:\\.(${p[m.XRANGEIDENTIFIER]})(?:${p[m.PRERELEASE]})?${p[m.BUILD]}?)?)?`);d("XRANGEPLAINLOOSE",`[v=\\s]*(${p[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[m.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[m.XRANGEIDENTIFIERLOOSE]})(?:${p[m.PRERELEASELOOSE]})?${p[m.BUILD]}?)?)?`);d("XRANGE",`^${p[m.GTLT]}\\s*${p[m.XRANGEPLAIN]}$`);d("XRANGELOOSE",`^${p[m.GTLT]}\\s*${p[m.XRANGEPLAINLOOSE]}$`);d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ze}})(?:\\.(\\d{1,${Ze}}))?(?:\\.(\\d{1,${Ze}}))?`);d("COERCE",`${p[m.COERCEPLAIN]}(?:$|[^\\d])`);d("COERCEFULL",p[m.COERCEPLAIN]+`(?:${p[m.PRERELEASE]})?(?:${p[m.BUILD]})?(?:$|[^\\d])`);d("COERCERTL",p[m.COERCE],!0);d("COERCERTLFULL",p[m.COERCEFULL],!0);d("LONETILDE","(?:~>?)");d("TILDETRIM",`(\\s*)${p[m.LONETILDE]}\\s+`,!0);q.tildeTrimReplace="$1~";d("TILDE",`^${p[m.LONETILDE]}${p[m.XRANGEPLAIN]}$`);d("TILDELOOSE",`^${p[m.LONETILDE]}${p[m.XRANGEPLAINLOOSE]}$`);d("LONECARET","(?:\\^)");d("CARETTRIM",`(\\s*)${p[m.LONECARET]}\\s+`,!0);q.caretTrimReplace="$1^";d("CARET",`^${p[m.LONECARET]}${p[m.XRANGEPLAIN]}$`);d("CARETLOOSE",`^${p[m.LONECARET]}${p[m.XRANGEPLAINLOOSE]}$`);d("COMPARATORLOOSE",`^${p[m.GTLT]}\\s*(${p[m.LOOSEPLAIN]})$|^$`);d("COMPARATOR",`^${p[m.GTLT]}\\s*(${p[m.FULLPLAIN]})$|^$`);d("COMPARATORTRIM",`(\\s*)${p[m.GTLT]}\\s*(${p[m.LOOSEPLAIN]}|${p[m.XRANGEPLAIN]})`,!0);q.comparatorTrimReplace="$1$2$3";d("HYPHENRANGE",`^\\s*(${p[m.XRANGEPLAIN]})\\s+-\\s+(${p[m.XRANGEPLAIN]})\\s*$`);d("HYPHENRANGELOOSE",`^\\s*(${p[m.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[m.XRANGEPLAINLOOSE]})\\s*$`);d("STAR","(<|>)?=?\\s*\\*");d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ge=l((Ml,vt)=>{"use strict";var bo=Object.freeze({loose:!0}),To=Object.freeze({}),Ao=e=>e?typeof e!="object"?bo:e:To;vt.exports=Ao});var er=l((Xl,Ot)=>{"use strict";var $t=/^[0-9]+$/,Lt=(e,r)=>{let t=$t.test(e),n=$t.test(r);return t&&n&&(e=+e,r=+r),e===r?0:t&&!n?-1:n&&!t?1:e<r?-1:1},vo=(e,r)=>Lt(r,e);Ot.exports={compareIdentifiers:Lt,rcompareIdentifiers:vo}});var I=l((Wl,qt)=>{"use strict";var we=z(),{MAX_LENGTH:Nt,MAX_SAFE_INTEGER:Ie}=Y(),{safeRe:Re,t:be}=U(),$o=ge(),{compareIdentifiers:M}=er(),rr=class e{constructor(r,t){if(t=$o(t),r instanceof e){if(r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease)return r;r=r.version}else if(typeof r!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof r}".`);if(r.length>Nt)throw new TypeError(`version is longer than ${Nt} characters`);we("SemVer",r,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let n=r.trim().match(t.loose?Re[be.LOOSE]:Re[be.FULL]);if(!n)throw new TypeError(`Invalid Version: ${r}`);if(this.raw=r,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Ie||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Ie||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Ie||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<Ie)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(r){if(we("SemVer.compare",this.version,this.options,r),!(r instanceof e)){if(typeof r=="string"&&r===this.version)return 0;r=new e(r,this.options)}return r.version===this.version?0:this.compareMain(r)||this.comparePre(r)}compareMain(r){return r instanceof e||(r=new e(r,this.options)),M(this.major,r.major)||M(this.minor,r.minor)||M(this.patch,r.patch)}comparePre(r){if(r instanceof e||(r=new e(r,this.options)),this.prerelease.length&&!r.prerelease.length)return-1;if(!this.prerelease.length&&r.prerelease.length)return 1;if(!this.prerelease.length&&!r.prerelease.length)return 0;let t=0;do{let n=this.prerelease[t],s=r.prerelease[t];if(we("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return M(n,s)}while(++t)}compareBuild(r){r instanceof e||(r=new e(r,this.options));let t=0;do{let n=this.build[t],s=r.build[t];if(we("build compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return M(n,s)}while(++t)}inc(r,t,n){if(r.startsWith("pre")){if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(t){let s=`-${t}`.match(this.options.loose?Re[be.PRERELEASELOOSE]:Re[be.PRERELEASE]);if(!s||s[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(r){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),M(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${r}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};qt.exports=rr});var D=l((Kl,Pt)=>{"use strict";var xt=I(),Lo=(e,r,t=!1)=>{if(e instanceof xt)return e;try{return new xt(e,r)}catch(n){if(!t)return null;throw n}};Pt.exports=Lo});var _t=l((Jl,jt)=>{"use strict";var Oo=D(),No=(e,r)=>{let t=Oo(e,r);return t?t.version:null};jt.exports=No});var Ct=l((Yl,Dt)=>{"use strict";var qo=D(),xo=(e,r)=>{let t=qo(e.trim().replace(/^[=v]+/,""),r);return t?t.version:null};Dt.exports=xo});var Vt=l((zl,Gt)=>{"use strict";var Bt=I(),Po=(e,r,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new Bt(e instanceof Bt?e.version:e,t).inc(r,n,s).version}catch{return null}};Gt.exports=Po});var Ht=l((Zl,kt)=>{"use strict";var Ft=D(),jo=(e,r)=>{let t=Ft(e,null,!0),n=Ft(r,null,!0),s=t.compare(n);if(s===0)return null;let i=s>0,o=i?t:n,a=i?n:t,f=!!o.prerelease.length;if(!!a.prerelease.length&&!f){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let h=f?"pre":"";return t.major!==n.major?h+"major":t.minor!==n.minor?h+"minor":t.patch!==n.patch?h+"patch":"prerelease"};kt.exports=jo});var Mt=l((Ql,Ut)=>{"use strict";var _o=I(),Do=(e,r)=>new _o(e,r).major;Ut.exports=Do});var Wt=l((eh,Xt)=>{"use strict";var Co=I(),Bo=(e,r)=>new Co(e,r).minor;Xt.exports=Bo});var Jt=l((rh,Kt)=>{"use strict";var Go=I(),Vo=(e,r)=>new Go(e,r).patch;Kt.exports=Vo});var zt=l((th,Yt)=>{"use strict";var Fo=D(),ko=(e,r)=>{let t=Fo(e,r);return t&&t.prerelease.length?t.prerelease:null};Yt.exports=ko});var $=l((nh,Qt)=>{"use strict";var Zt=I(),Ho=(e,r,t)=>new Zt(e,t).compare(new Zt(r,t));Qt.exports=Ho});var rn=l((sh,en)=>{"use strict";var Uo=$(),Mo=(e,r,t)=>Uo(r,e,t);en.exports=Mo});var nn=l((ih,tn)=>{"use strict";var Xo=$(),Wo=(e,r)=>Xo(e,r,!0);tn.exports=Wo});var Te=l((oh,on)=>{"use strict";var sn=I(),Ko=(e,r,t)=>{let n=new sn(e,t),s=new sn(r,t);return n.compare(s)||n.compareBuild(s)};on.exports=Ko});var cn=l((ah,an)=>{"use strict";var Jo=Te(),Yo=(e,r)=>e.sort((t,n)=>Jo(t,n,r));an.exports=Yo});var fn=l((ch,un)=>{"use strict";var zo=Te(),Zo=(e,r)=>e.sort((t,n)=>zo(n,t,r));un.exports=Zo});var Z=l((uh,ln)=>{"use strict";var Qo=$(),ea=(e,r,t)=>Qo(e,r,t)>0;ln.exports=ea});var Ae=l((fh,hn)=>{"use strict";var ra=$(),ta=(e,r,t)=>ra(e,r,t)<0;hn.exports=ta});var tr=l((lh,pn)=>{"use strict";var na=$(),sa=(e,r,t)=>na(e,r,t)===0;pn.exports=sa});var nr=l((hh,mn)=>{"use strict";var ia=$(),oa=(e,r,t)=>ia(e,r,t)!==0;mn.exports=oa});var ve=l((ph,En)=>{"use strict";var aa=$(),ca=(e,r,t)=>aa(e,r,t)>=0;En.exports=ca});var $e=l((mh,dn)=>{"use strict";var ua=$(),fa=(e,r,t)=>ua(e,r,t)<=0;dn.exports=fa});var sr=l((Eh,yn)=>{"use strict";var la=tr(),ha=nr(),pa=Z(),ma=ve(),Ea=Ae(),da=$e(),ya=(e,r,t,n)=>{switch(r){case"===":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e===t;case"!==":return typeof e=="object"&&(e=e.version),typeof t=="object"&&(t=t.version),e!==t;case"":case"=":case"==":return la(e,t,n);case"!=":return ha(e,t,n);case">":return pa(e,t,n);case">=":return ma(e,t,n);case"<":return Ea(e,t,n);case"<=":return da(e,t,n);default:throw new TypeError(`Invalid operator: ${r}`)}};yn.exports=ya});var gn=l((dh,Sn)=>{"use strict";var Sa=I(),ga=D(),{safeRe:Le,t:Oe}=U(),wa=(e,r)=>{if(e instanceof Sa)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;r=r||{};let t=null;if(!r.rtl)t=e.match(r.includePrerelease?Le[Oe.COERCEFULL]:Le[Oe.COERCE]);else{let f=r.includePrerelease?Le[Oe.COERCERTLFULL]:Le[Oe.COERCERTL],u;for(;(u=f.exec(e))&&(!t||t.index+t[0].length!==e.length);)(!t||u.index+u[0].length!==t.index+t[0].length)&&(t=u),f.lastIndex=u.index+u[1].length+u[2].length;f.lastIndex=-1}if(t===null)return null;let n=t[2],s=t[3]||"0",i=t[4]||"0",o=r.includePrerelease&&t[5]?`-${t[5]}`:"",a=r.includePrerelease&&t[6]?`+${t[6]}`:"";return ga(`${n}.${s}.${i}${o}${a}`,r)};Sn.exports=wa});var In=l((yh,wn)=>{"use strict";var ir=class{constructor(){this.max=1e3,this.map=new Map}get(r){let t=this.map.get(r);if(t!==void 0)return this.map.delete(r),this.map.set(r,t),t}delete(r){return this.map.delete(r)}set(r,t){if(!this.delete(r)&&t!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(r,t)}return this}};wn.exports=ir});var L=l((Sh,An)=>{"use strict";var Ia=/\s+/g,or=class e{constructor(r,t){if(t=ba(t),r instanceof e)return r.loose===!!t.loose&&r.includePrerelease===!!t.includePrerelease?r:new e(r.raw,t);if(r instanceof ar)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=r.trim().replace(Ia," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!bn(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&Na(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let r=0;r<this.set.length;r++){r>0&&(this.formatted+="||");let t=this.set[r];for(let n=0;n<t.length;n++)n>0&&(this.formatted+=" "),this.formatted+=t[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(r){let n=((this.options.includePrerelease&&La)|(this.options.loose&&Oa))+":"+r,s=Rn.get(n);if(s)return s;let i=this.options.loose,o=i?A[R.HYPHENRANGELOOSE]:A[R.HYPHENRANGE];r=r.replace(o,Va(this.options.includePrerelease)),g("hyphen replace",r),r=r.replace(A[R.COMPARATORTRIM],Aa),g("comparator trim",r),r=r.replace(A[R.TILDETRIM],va),g("tilde trim",r),r=r.replace(A[R.CARETTRIM],$a),g("caret trim",r);let a=r.split(" ").map(c=>qa(c,this.options)).join(" ").split(/\s+/).map(c=>Ga(c,this.options));i&&(a=a.filter(c=>(g("loose invalid filter",c,this.options),!!c.match(A[R.COMPARATORLOOSE])))),g("range list",a);let f=new Map,u=a.map(c=>new ar(c,this.options));for(let c of u){if(bn(c))return[c];f.set(c.value,c)}f.size>1&&f.has("")&&f.delete("");let h=[...f.values()];return Rn.set(n,h),h}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>Tn(n,t)&&r.set.some(s=>Tn(s,t)&&n.every(i=>s.every(o=>i.intersects(o,t)))))}test(r){if(!r)return!1;if(typeof r=="string")try{r=new Ta(r,this.options)}catch{return!1}for(let t=0;t<this.set.length;t++)if(Fa(this.set[t],r,this.options))return!0;return!1}};An.exports=or;var Ra=In(),Rn=new Ra,ba=ge(),ar=Q(),g=z(),Ta=I(),{safeRe:A,t:R,comparatorTrimReplace:Aa,tildeTrimReplace:va,caretTrimReplace:$a}=U(),{FLAG_INCLUDE_PRERELEASE:La,FLAG_LOOSE:Oa}=Y(),bn=e=>e.value==="<0.0.0-0",Na=e=>e.value==="",Tn=(e,r)=>{let t=!0,n=e.slice(),s=n.pop();for(;t&&n.length;)t=n.every(i=>s.intersects(i,r)),s=n.pop();return t},qa=(e,r)=>(g("comp",e,r),e=ja(e,r),g("caret",e),e=xa(e,r),g("tildes",e),e=Da(e,r),g("xrange",e),e=Ba(e,r),g("stars",e),e),b=e=>!e||e.toLowerCase()==="x"||e==="*",xa=(e,r)=>e.trim().split(/\s+/).map(t=>Pa(t,r)).join(" "),Pa=(e,r)=>{let t=r.loose?A[R.TILDELOOSE]:A[R.TILDE];return e.replace(t,(n,s,i,o,a)=>{g("tilde",e,n,s,i,o,a);let f;return b(s)?f="":b(i)?f=`>=${s}.0.0 <${+s+1}.0.0-0`:b(o)?f=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(g("replaceTilde pr",a),f=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):f=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,g("tilde return",f),f})},ja=(e,r)=>e.trim().split(/\s+/).map(t=>_a(t,r)).join(" "),_a=(e,r)=>{g("caret",e,r);let t=r.loose?A[R.CARETLOOSE]:A[R.CARET],n=r.includePrerelease?"-0":"";return e.replace(t,(s,i,o,a,f)=>{g("caret",e,s,i,o,a,f);let u;return b(i)?u="":b(o)?u=`>=${i}.0.0${n} <${+i+1}.0.0-0`:b(a)?i==="0"?u=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:f?(g("replaceCaret pr",f),i==="0"?o==="0"?u=`>=${i}.${o}.${a}-${f} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}-${f} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a}-${f} <${+i+1}.0.0-0`):(g("no pr"),i==="0"?o==="0"?u=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:u=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:u=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),g("caret return",u),u})},Da=(e,r)=>(g("replaceXRanges",e,r),e.split(/\s+/).map(t=>Ca(t,r)).join(" ")),Ca=(e,r)=>{e=e.trim();let t=r.loose?A[R.XRANGELOOSE]:A[R.XRANGE];return e.replace(t,(n,s,i,o,a,f)=>{g("xRange",e,n,s,i,o,a,f);let u=b(i),h=u||b(o),c=h||b(a),y=c;return s==="="&&y&&(s=""),f=r.includePrerelease?"-0":"",u?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&y?(h&&(o=0),a=0,s===">"?(s=">=",h?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",h?i=+i+1:o=+o+1),s==="<"&&(f="-0"),n=`${s+i}.${o}.${a}${f}`):h?n=`>=${i}.0.0${f} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${f} <${i}.${+o+1}.0-0`),g("xRange return",n),n})},Ba=(e,r)=>(g("replaceStars",e,r),e.trim().replace(A[R.STAR],"")),Ga=(e,r)=>(g("replaceGTE0",e,r),e.trim().replace(A[r.includePrerelease?R.GTE0PRE:R.GTE0],"")),Va=e=>(r,t,n,s,i,o,a,f,u,h,c,y)=>(b(n)?t="":b(s)?t=`>=${n}.0.0${e?"-0":""}`:b(i)?t=`>=${n}.${s}.0${e?"-0":""}`:o?t=`>=${t}`:t=`>=${t}${e?"-0":""}`,b(u)?f="":b(h)?f=`<${+u+1}.0.0-0`:b(c)?f=`<${u}.${+h+1}.0-0`:y?f=`<=${u}.${h}.${c}-${y}`:e?f=`<${u}.${h}.${+c+1}-0`:f=`<=${f}`,`${t} ${f}`.trim()),Fa=(e,r,t)=>{for(let n=0;n<e.length;n++)if(!e[n].test(r))return!1;if(r.prerelease.length&&!t.includePrerelease){for(let n=0;n<e.length;n++)if(g(e[n].semver),e[n].semver!==ar.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===r.major&&s.minor===r.minor&&s.patch===r.patch)return!0}return!1}return!0}});var Q=l((gh,qn)=>{"use strict";var ee=Symbol("SemVer ANY"),fr=class e{static get ANY(){return ee}constructor(r,t){if(t=vn(t),r instanceof e){if(r.loose===!!t.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),ur("comparator",r,t),this.options=t,this.loose=!!t.loose,this.parse(r),this.semver===ee?this.value="":this.value=this.operator+this.semver.version,ur("comp",this)}parse(r){let t=this.options.loose?$n[Ln.COMPARATORLOOSE]:$n[Ln.COMPARATOR],n=r.match(t);if(!n)throw new TypeError(`Invalid comparator: ${r}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new On(n[2],this.options.loose):this.semver=ee}toString(){return this.value}test(r){if(ur("Comparator.test",r,this.options.loose),this.semver===ee||r===ee)return!0;if(typeof r=="string")try{r=new On(r,this.options)}catch{return!1}return cr(r,this.operator,this.semver,this.options)}intersects(r,t){if(!(r instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Nn(r.value,t).test(this.value):r.operator===""?r.value===""?!0:new Nn(this.value,t).test(r.semver):(t=vn(t),t.includePrerelease&&(this.value==="<0.0.0-0"||r.value==="<0.0.0-0")||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||r.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&r.operator.startsWith(">")||this.operator.startsWith("<")&&r.operator.startsWith("<")||this.semver.version===r.semver.version&&this.operator.includes("=")&&r.operator.includes("=")||cr(this.semver,"<",r.semver,t)&&this.operator.startsWith(">")&&r.operator.startsWith("<")||cr(this.semver,">",r.semver,t)&&this.operator.startsWith("<")&&r.operator.startsWith(">")))}};qn.exports=fr;var vn=ge(),{safeRe:$n,t:Ln}=U(),cr=sr(),ur=z(),On=I(),Nn=L()});var re=l((wh,xn)=>{"use strict";var ka=L(),Ha=(e,r,t)=>{try{r=new ka(r,t)}catch{return!1}return r.test(e)};xn.exports=Ha});var jn=l((Ih,Pn)=>{"use strict";var Ua=L(),Ma=(e,r)=>new Ua(e,r).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));Pn.exports=Ma});var Dn=l((Rh,_n)=>{"use strict";var Xa=I(),Wa=L(),Ka=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Wa(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new Xa(n,t))}),n};_n.exports=Ka});var Bn=l((bh,Cn)=>{"use strict";var Ja=I(),Ya=L(),za=(e,r,t)=>{let n=null,s=null,i=null;try{i=new Ya(r,t)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new Ja(n,t))}),n};Cn.exports=za});var Fn=l((Th,Vn)=>{"use strict";var lr=I(),Za=L(),Gn=Z(),Qa=(e,r)=>{e=new Za(e,r);let t=new lr("0.0.0");if(e.test(t)||(t=new lr("0.0.0-0"),e.test(t)))return t;t=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new lr(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Gn(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!t||Gn(t,i))&&(t=i)}return t&&e.test(t)?t:null};Vn.exports=Qa});var Hn=l((Ah,kn)=>{"use strict";var ec=L(),rc=(e,r)=>{try{return new ec(e,r).range||"*"}catch{return null}};kn.exports=rc});var Ne=l((vh,Wn)=>{"use strict";var tc=I(),Xn=Q(),{ANY:nc}=Xn,sc=L(),ic=re(),Un=Z(),Mn=Ae(),oc=$e(),ac=ve(),cc=(e,r,t,n)=>{e=new tc(e,n),r=new sc(r,n);let s,i,o,a,f;switch(t){case">":s=Un,i=oc,o=Mn,a=">",f=">=";break;case"<":s=Mn,i=ac,o=Un,a="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ic(e,r,n))return!1;for(let u=0;u<r.set.length;++u){let h=r.set[u],c=null,y=null;if(h.forEach(E=>{E.semver===nc&&(E=new Xn(">=0.0.0")),c=c||E,y=y||E,s(E.semver,c.semver,n)?c=E:o(E.semver,y.semver,n)&&(y=E)}),c.operator===a||c.operator===f||(!y.operator||y.operator===a)&&i(e,y.semver))return!1;if(y.operator===f&&o(e,y.semver))return!1}return!0};Wn.exports=cc});var Jn=l(($h,Kn)=>{"use strict";var uc=Ne(),fc=(e,r,t)=>uc(e,r,">",t);Kn.exports=fc});var zn=l((Lh,Yn)=>{"use strict";var lc=Ne(),hc=(e,r,t)=>lc(e,r,"<",t);Yn.exports=hc});var es=l((Oh,Qn)=>{"use strict";var Zn=L(),pc=(e,r,t)=>(e=new Zn(e,t),r=new Zn(r,t),e.intersects(r,t));Qn.exports=pc});var ts=l((Nh,rs)=>{"use strict";var mc=re(),Ec=$();rs.exports=(e,r,t)=>{let n=[],s=null,i=null,o=e.sort((h,c)=>Ec(h,c,t));for(let h of o)mc(h,r,t)?(i=h,s||(s=h)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[h,c]of n)h===c?a.push(h):!c&&h===o[0]?a.push("*"):c?h===o[0]?a.push(`<=${c}`):a.push(`${h} - ${c}`):a.push(`>=${h}`);let f=a.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return f.length<u.length?f:r}});var cs=l((qh,as)=>{"use strict";var ns=L(),pr=Q(),{ANY:hr}=pr,te=re(),mr=$(),dc=(e,r,t={})=>{if(e===r)return!0;e=new ns(e,t),r=new ns(r,t);let n=!1;e:for(let s of e.set){for(let i of r.set){let o=Sc(s,i,t);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},yc=[new pr(">=0.0.0-0")],ss=[new pr(">=0.0.0")],Sc=(e,r,t)=>{if(e===r)return!0;if(e.length===1&&e[0].semver===hr){if(r.length===1&&r[0].semver===hr)return!0;t.includePrerelease?e=yc:e=ss}if(r.length===1&&r[0].semver===hr){if(t.includePrerelease)return!0;r=ss}let n=new Set,s,i;for(let E of e)E.operator===">"||E.operator===">="?s=is(s,E,t):E.operator==="<"||E.operator==="<="?i=os(i,E,t):n.add(E.semver);if(n.size>1)return null;let o;if(s&&i){if(o=mr(s.semver,i.semver,t),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let E of n){if(s&&!te(E,String(s),t)||i&&!te(E,String(i),t))return null;for(let w of r)if(!te(E,String(w),t))return!1;return!0}let a,f,u,h,c=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,y=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;c&&c.prerelease.length===1&&i.operator==="<"&&c.prerelease[0]===0&&(c=!1);for(let E of r){if(h=h||E.operator===">"||E.operator===">=",u=u||E.operator==="<"||E.operator==="<=",s){if(y&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===y.major&&E.semver.minor===y.minor&&E.semver.patch===y.patch&&(y=!1),E.operator===">"||E.operator===">="){if(a=is(s,E,t),a===E&&a!==s)return!1}else if(s.operator===">="&&!te(s.semver,String(E),t))return!1}if(i){if(c&&E.semver.prerelease&&E.semver.prerelease.length&&E.semver.major===c.major&&E.semver.minor===c.minor&&E.semver.patch===c.patch&&(c=!1),E.operator==="<"||E.operator==="<="){if(f=os(i,E,t),f===E&&f!==i)return!1}else if(i.operator==="<="&&!te(i.semver,String(E),t))return!1}if(!E.operator&&(i||s)&&o!==0)return!1}return!(s&&u&&!i&&o!==0||i&&h&&!s&&o!==0||y||c)},is=(e,r,t)=>{if(!e)return r;let n=mr(e.semver,r.semver,t);return n>0?e:n<0||r.operator===">"&&e.operator===">="?r:e},os=(e,r,t)=>{if(!e)return r;let n=mr(e.semver,r.semver,t);return n<0?e:n>0||r.operator==="<"&&e.operator==="<="?r:e};as.exports=dc});var qe=l((xh,ls)=>{"use strict";var Er=U(),us=Y(),gc=I(),fs=er(),wc=D(),Ic=_t(),Rc=Ct(),bc=Vt(),Tc=Ht(),Ac=Mt(),vc=Wt(),$c=Jt(),Lc=zt(),Oc=$(),Nc=rn(),qc=nn(),xc=Te(),Pc=cn(),jc=fn(),_c=Z(),Dc=Ae(),Cc=tr(),Bc=nr(),Gc=ve(),Vc=$e(),Fc=sr(),kc=gn(),Hc=Q(),Uc=L(),Mc=re(),Xc=jn(),Wc=Dn(),Kc=Bn(),Jc=Fn(),Yc=Hn(),zc=Ne(),Zc=Jn(),Qc=zn(),eu=es(),ru=ts(),tu=cs();ls.exports={parse:wc,valid:Ic,clean:Rc,inc:bc,diff:Tc,major:Ac,minor:vc,patch:$c,prerelease:Lc,compare:Oc,rcompare:Nc,compareLoose:qc,compareBuild:xc,sort:Pc,rsort:jc,gt:_c,lt:Dc,eq:Cc,neq:Bc,gte:Gc,lte:Vc,cmp:Fc,coerce:kc,Comparator:Hc,Range:Uc,satisfies:Mc,toComparators:Xc,maxSatisfying:Wc,minSatisfying:Kc,minVersion:Jc,validRange:Yc,outside:zc,gtr:Zc,ltr:Qc,intersects:eu,simplifyRange:ru,subset:tu,SemVer:gc,re:Er.re,src:Er.src,tokens:Er.t,SEMVER_SPEC_VERSION:us.SEMVER_SPEC_VERSION,RELEASE_TYPES:us.RELEASE_TYPES,compareIdentifiers:fs.compareIdentifiers,rcompareIdentifiers:fs.rcompareIdentifiers}});var ps=l((Ph,hs)=>{var nu=qe();hs.exports=nu.satisfies(process.version,">=15.7.0")});var Es=l((jh,ms)=>{var su=qe();ms.exports=su.satisfies(process.version,">=16.9.0")});var dr=l((_h,ds)=>{var iu=ps(),ou=Es(),au={ec:["ES256","ES384","ES512"],rsa:["RS256","PS256","RS384","PS384","RS512","PS512"],"rsa-pss":["PS256","PS384","PS512"]},cu={ES256:"prime256v1",ES384:"secp384r1",ES512:"secp521r1"};ds.exports=function(e,r){if(!e||!r)return;let t=r.asymmetricKeyType;if(!t)return;let n=au[t];if(!n)throw new Error(`Unknown key type "${t}".`);if(!n.includes(e))throw new Error(`"alg" parameter for "${t}" key type must be one of: ${n.join(", ")}.`);if(iu)switch(t){case"ec":let s=r.asymmetricKeyDetails.namedCurve,i=cu[e];if(s!==i)throw new Error(`"alg" parameter "${e}" requires curve "${i}".`);break;case"rsa-pss":if(ou){let o=parseInt(e.slice(-3),10),{hashAlgorithm:a,mgf1HashAlgorithm:f,saltLength:u}=r.asymmetricKeyDetails;if(a!==`sha${o}`||f!==a)throw new Error(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}.`);if(u!==void 0&&u>o>>3)throw new Error(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}.`)}break}}});var yr=l((Dh,ys)=>{var uu=qe();ys.exports=uu.satisfies(process.version,"^6.12.0 || >=8.0.0")});var ws=l((Ch,gs)=>{var S=J(),fu=Je(),Ss=Ye(),lu=Ke(),hu=ze(),pu=dr(),mu=yr(),Eu=me(),{KeyObject:du,createSecretKey:yu,createPublicKey:Su}=require("crypto"),Sr=["RS256","RS384","RS512"],gu=["ES256","ES384","ES512"],gr=["RS256","RS384","RS512"],wu=["HS256","HS384","HS512"];mu&&(Sr.splice(Sr.length,0,"PS256","PS384","PS512"),gr.splice(gr.length,0,"PS256","PS384","PS512"));gs.exports=function(e,r,t,n){typeof t=="function"&&!n&&(n=t,t={}),t||(t={}),t=Object.assign({},t);let s;if(n?s=n:s=function(h,c){if(h)throw h;return c},t.clockTimestamp&&typeof t.clockTimestamp!="number")return s(new S("clockTimestamp must be a number"));if(t.nonce!==void 0&&(typeof t.nonce!="string"||t.nonce.trim()===""))return s(new S("nonce must be a non-empty string"));if(t.allowInvalidAsymmetricKeyTypes!==void 0&&typeof t.allowInvalidAsymmetricKeyTypes!="boolean")return s(new S("allowInvalidAsymmetricKeyTypes must be a boolean"));let i=t.clockTimestamp||Math.floor(Date.now()/1e3);if(!e)return s(new S("jwt must be provided"));if(typeof e!="string")return s(new S("jwt must be a string"));let o=e.split(".");if(o.length!==3)return s(new S("jwt malformed"));let a;try{a=lu(e,{complete:!0})}catch(h){return s(h)}if(!a)return s(new S("invalid token"));let f=a.header,u;if(typeof r=="function"){if(!n)return s(new S("verify must be called asynchronous if secret or public key is provided as a callback"));u=r}else u=function(h,c){return c(null,r)};return u(f,function(h,c){if(h)return s(new S("error in secret or public key callback: "+h.message));let y=o[2].trim()!=="";if(!y&&c)return s(new S("jwt signature is required"));if(y&&!c)return s(new S("secret or public key must be provided"));if(!y&&!t.algorithms)return s(new S('please specify "none" in "algorithms" to verify unsigned tokens'));if(c!=null&&!(c instanceof du))try{c=Su(c)}catch{try{c=yu(typeof c=="string"?Buffer.from(c):c)}catch{return s(new S("secretOrPublicKey is not valid key material"))}}if(t.algorithms||(c.type==="secret"?t.algorithms=wu:["rsa","rsa-pss"].includes(c.asymmetricKeyType)?t.algorithms=gr:c.asymmetricKeyType==="ec"?t.algorithms=gu:t.algorithms=Sr),t.algorithms.indexOf(a.header.alg)===-1)return s(new S("invalid algorithm"));if(f.alg.startsWith("HS")&&c.type!=="secret")return s(new S(`secretOrPublicKey must be a symmetric key when using ${f.alg}`));if(/^(?:RS|PS|ES)/.test(f.alg)&&c.type!=="public")return s(new S(`secretOrPublicKey must be an asymmetric key when using ${f.alg}`));if(!t.allowInvalidAsymmetricKeyTypes)try{pu(f.alg,c)}catch(T){return s(T)}let E;try{E=Eu.verify(e,a.header.alg,c)}catch(T){return s(T)}if(!E)return s(new S("invalid signature"));let w=a.payload;if(typeof w.nbf<"u"&&!t.ignoreNotBefore){if(typeof w.nbf!="number")return s(new S("invalid nbf value"));if(w.nbf>i+(t.clockTolerance||0))return s(new fu("jwt not active",new Date(w.nbf*1e3)))}if(typeof w.exp<"u"&&!t.ignoreExpiration){if(typeof w.exp!="number")return s(new S("invalid exp value"));if(i>=w.exp+(t.clockTolerance||0))return s(new Ss("jwt expired",new Date(w.exp*1e3)))}if(t.audience){let T=Array.isArray(t.audience)?t.audience:[t.audience];if(!(Array.isArray(w.aud)?w.aud:[w.aud]).some(function(Ar){return T.some(function(Ce){return Ce instanceof RegExp?Ce.test(Ar):Ce===Ar})}))return s(new S("jwt audience invalid. expected: "+T.join(" or ")))}if(t.issuer&&(typeof t.issuer=="string"&&w.iss!==t.issuer||Array.isArray(t.issuer)&&t.issuer.indexOf(w.iss)===-1))return s(new S("jwt issuer invalid. expected: "+t.issuer));if(t.subject&&w.sub!==t.subject)return s(new S("jwt subject invalid. expected: "+t.subject));if(t.jwtid&&w.jti!==t.jwtid)return s(new S("jwt jwtid invalid. expected: "+t.jwtid));if(t.nonce&&w.nonce!==t.nonce)return s(new S("jwt nonce invalid. expected: "+t.nonce));if(t.maxAge){if(typeof w.iat!="number")return s(new S("iat required when maxAge is specified"));let T=hu(t.maxAge,w.iat);if(typeof T>"u")return s(new S('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(i>=T+(t.clockTolerance||0))return s(new Ss("maxAge exceeded",new Date(T*1e3)))}if(t.complete===!0){let T=a.signature;return s(null,{header:f,payload:w,signature:T})}return s(null,w)})}});var vs=l((Bh,As)=>{var Is=1/0,bs=9007199254740991,Iu=17976931348623157e292,Rs=NaN,Ru="[object Arguments]",bu="[object Function]",Tu="[object GeneratorFunction]",Au="[object String]",vu="[object Symbol]",$u=/^\s+|\s+$/g,Lu=/^[-+]0x[0-9a-f]+$/i,Ou=/^0b[01]+$/i,Nu=/^0o[0-7]+$/i,qu=/^(?:0|[1-9]\d*)$/,xu=parseInt;function Pu(e,r){for(var t=-1,n=e?e.length:0,s=Array(n);++t<n;)s[t]=r(e[t],t,e);return s}function ju(e,r,t,n){for(var s=e.length,i=t+(n?1:-1);n?i--:++i<s;)if(r(e[i],i,e))return i;return-1}function _u(e,r,t){if(r!==r)return ju(e,Du,t);for(var n=t-1,s=e.length;++n<s;)if(e[n]===r)return n;return-1}function Du(e){return e!==e}function Cu(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}function Bu(e,r){return Pu(r,function(t){return e[t]})}function Gu(e,r){return function(t){return e(r(t))}}var xe=Object.prototype,Ir=xe.hasOwnProperty,Pe=xe.toString,Vu=xe.propertyIsEnumerable,Fu=Gu(Object.keys,Object),ku=Math.max;function Hu(e,r){var t=Ts(e)||Ku(e)?Cu(e.length,String):[],n=t.length,s=!!n;for(var i in e)(r||Ir.call(e,i))&&!(s&&(i=="length"||Mu(i,n)))&&t.push(i);return t}function Uu(e){if(!Xu(e))return Fu(e);var r=[];for(var t in Object(e))Ir.call(e,t)&&t!="constructor"&&r.push(t);return r}function Mu(e,r){return r=r??bs,!!r&&(typeof e=="number"||qu.test(e))&&e>-1&&e%1==0&&e<r}function Xu(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||xe;return e===t}function Wu(e,r,t,n){e=Rr(e)?e:sf(e),t=t&&!n?rf(t):0;var s=e.length;return t<0&&(t=ku(s+t,0)),Zu(e)?t<=s&&e.indexOf(r,t)>-1:!!s&&_u(e,r,t)>-1}function Ku(e){return Ju(e)&&Ir.call(e,"callee")&&(!Vu.call(e,"callee")||Pe.call(e)==Ru)}var Ts=Array.isArray;function Rr(e){return e!=null&&zu(e.length)&&!Yu(e)}function Ju(e){return br(e)&&Rr(e)}function Yu(e){var r=wr(e)?Pe.call(e):"";return r==bu||r==Tu}function zu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bs}function wr(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function br(e){return!!e&&typeof e=="object"}function Zu(e){return typeof e=="string"||!Ts(e)&&br(e)&&Pe.call(e)==Au}function Qu(e){return typeof e=="symbol"||br(e)&&Pe.call(e)==vu}function ef(e){if(!e)return e===0?e:0;if(e=tf(e),e===Is||e===-Is){var r=e<0?-1:1;return r*Iu}return e===e?e:0}function rf(e){var r=ef(e),t=r%1;return r===r?t?r-t:r:0}function tf(e){if(typeof e=="number")return e;if(Qu(e))return Rs;if(wr(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=wr(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace($u,"");var t=Ou.test(e);return t||Nu.test(e)?xu(e.slice(2),t?2:8):Lu.test(e)?Rs:+e}function nf(e){return Rr(e)?Hu(e):Uu(e)}function sf(e){return e?Bu(e,nf(e)):[]}As.exports=Wu});var Ls=l((Gh,$s)=>{var of="[object Boolean]",af=Object.prototype,cf=af.toString;function uf(e){return e===!0||e===!1||ff(e)&&cf.call(e)==of}function ff(e){return!!e&&typeof e=="object"}$s.exports=uf});var Ps=l((Vh,xs)=>{var Os=1/0,lf=17976931348623157e292,Ns=NaN,hf="[object Symbol]",pf=/^\s+|\s+$/g,mf=/^[-+]0x[0-9a-f]+$/i,Ef=/^0b[01]+$/i,df=/^0o[0-7]+$/i,yf=parseInt,Sf=Object.prototype,gf=Sf.toString;function wf(e){return typeof e=="number"&&e==Tf(e)}function qs(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function If(e){return!!e&&typeof e=="object"}function Rf(e){return typeof e=="symbol"||If(e)&&gf.call(e)==hf}function bf(e){if(!e)return e===0?e:0;if(e=Af(e),e===Os||e===-Os){var r=e<0?-1:1;return r*lf}return e===e?e:0}function Tf(e){var r=bf(e),t=r%1;return r===r?t?r-t:r:0}function Af(e){if(typeof e=="number")return e;if(Rf(e))return Ns;if(qs(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=qs(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(pf,"");var t=Ef.test(e);return t||df.test(e)?yf(e.slice(2),t?2:8):mf.test(e)?Ns:+e}xs.exports=wf});var _s=l((Fh,js)=>{var vf="[object Number]",$f=Object.prototype,Lf=$f.toString;function Of(e){return!!e&&typeof e=="object"}function Nf(e){return typeof e=="number"||Of(e)&&Lf.call(e)==vf}js.exports=Nf});var Gs=l((kh,Bs)=>{var qf="[object Object]";function xf(e){var r=!1;if(e!=null&&typeof e.toString!="function")try{r=!!(e+"")}catch{}return r}function Pf(e,r){return function(t){return e(r(t))}}var jf=Function.prototype,Ds=Object.prototype,Cs=jf.toString,_f=Ds.hasOwnProperty,Df=Cs.call(Object),Cf=Ds.toString,Bf=Pf(Object.getPrototypeOf,Object);function Gf(e){return!!e&&typeof e=="object"}function Vf(e){if(!Gf(e)||Cf.call(e)!=qf||xf(e))return!1;var r=Bf(e);if(r===null)return!0;var t=_f.call(r,"constructor")&&r.constructor;return typeof t=="function"&&t instanceof t&&Cs.call(t)==Df}Bs.exports=Vf});var Fs=l((Hh,Vs)=>{var Ff="[object String]",kf=Object.prototype,Hf=kf.toString,Uf=Array.isArray;function Mf(e){return!!e&&typeof e=="object"}function Xf(e){return typeof e=="string"||!Uf(e)&&Mf(e)&&Hf.call(e)==Ff}Vs.exports=Xf});var Xs=l((Uh,Ms)=>{var Wf="Expected a function",ks=1/0,Kf=17976931348623157e292,Hs=NaN,Jf="[object Symbol]",Yf=/^\s+|\s+$/g,zf=/^[-+]0x[0-9a-f]+$/i,Zf=/^0b[01]+$/i,Qf=/^0o[0-7]+$/i,el=parseInt,rl=Object.prototype,tl=rl.toString;function nl(e,r){var t;if(typeof r!="function")throw new TypeError(Wf);return e=cl(e),function(){return--e>0&&(t=r.apply(this,arguments)),e<=1&&(r=void 0),t}}function sl(e){return nl(2,e)}function Us(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function il(e){return!!e&&typeof e=="object"}function ol(e){return typeof e=="symbol"||il(e)&&tl.call(e)==Jf}function al(e){if(!e)return e===0?e:0;if(e=ul(e),e===ks||e===-ks){var r=e<0?-1:1;return r*Kf}return e===e?e:0}function cl(e){var r=al(e),t=r%1;return r===r?t?r-t:r:0}function ul(e){if(typeof e=="number")return e;if(ol(e))return Hs;if(Us(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Us(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Yf,"");var t=Zf.test(e);return t||Qf.test(e)?el(e.slice(2),t?2:8):zf.test(e)?Hs:+e}Ms.exports=sl});var ri=l((Mh,ei)=>{var Ws=ze(),fl=yr(),ll=dr(),Ks=me(),hl=vs(),je=Ls(),Js=Ps(),Tr=_s(),zs=Gs(),P=Fs(),pl=Xs(),{KeyObject:ml,createSecretKey:El,createPrivateKey:dl}=require("crypto"),Zs=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];fl&&Zs.splice(3,0,"PS256","PS384","PS512");var yl={expiresIn:{isValid:function(e){return Js(e)||P(e)&&e},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(e){return Js(e)||P(e)&&e},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(e){return P(e)||Array.isArray(e)},message:'"audience" must be a string or array'},algorithm:{isValid:hl.bind(null,Zs),message:'"algorithm" must be a valid string enum value'},header:{isValid:zs,message:'"header" must be an object'},encoding:{isValid:P,message:'"encoding" must be a string'},issuer:{isValid:P,message:'"issuer" must be a string'},subject:{isValid:P,message:'"subject" must be a string'},jwtid:{isValid:P,message:'"jwtid" must be a string'},noTimestamp:{isValid:je,message:'"noTimestamp" must be a boolean'},keyid:{isValid:P,message:'"keyid" must be a string'},mutatePayload:{isValid:je,message:'"mutatePayload" must be a boolean'},allowInsecureKeySizes:{isValid:je,message:'"allowInsecureKeySizes" must be a boolean'},allowInvalidAsymmetricKeyTypes:{isValid:je,message:'"allowInvalidAsymmetricKeyTypes" must be a boolean'}},Sl={iat:{isValid:Tr,message:'"iat" should be a number of seconds'},exp:{isValid:Tr,message:'"exp" should be a number of seconds'},nbf:{isValid:Tr,message:'"nbf" should be a number of seconds'}};function Qs(e,r,t,n){if(!zs(t))throw new Error('Expected "'+n+'" to be a plain object.');Object.keys(t).forEach(function(s){let i=e[s];if(!i){if(!r)throw new Error('"'+s+'" is not allowed in "'+n+'"');return}if(!i.isValid(t[s]))throw new Error(i.message)})}function gl(e){return Qs(yl,!1,e,"options")}function wl(e){return Qs(Sl,!0,e,"payload")}var Ys={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},Il=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];ei.exports=function(e,r,t,n){typeof t=="function"?(n=t,t={}):t=t||{};let s=typeof e=="object"&&!Buffer.isBuffer(e),i=Object.assign({alg:t.algorithm||"HS256",typ:s?"JWT":void 0,kid:t.keyid},t.header);function o(u){if(n)return n(u);throw u}if(!r&&t.algorithm!=="none")return o(new Error("secretOrPrivateKey must have a value"));if(r!=null&&!(r instanceof ml))try{r=dl(r)}catch{try{r=El(typeof r=="string"?Buffer.from(r):r)}catch{return o(new Error("secretOrPrivateKey is not valid key material"))}}if(i.alg.startsWith("HS")&&r.type!=="secret")return o(new Error(`secretOrPrivateKey must be a symmetric key when using ${i.alg}`));if(/^(?:RS|PS|ES)/.test(i.alg)){if(r.type!=="private")return o(new Error(`secretOrPrivateKey must be an asymmetric key when using ${i.alg}`));if(!t.allowInsecureKeySizes&&!i.alg.startsWith("ES")&&r.asymmetricKeyDetails!==void 0&&r.asymmetricKeyDetails.modulusLength<2048)return o(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`))}if(typeof e>"u")return o(new Error("payload is required"));if(s){try{wl(e)}catch(u){return o(u)}t.mutatePayload||(e=Object.assign({},e))}else{let u=Il.filter(function(h){return typeof t[h]<"u"});if(u.length>0)return o(new Error("invalid "+u.join(",")+" option for "+typeof e+" payload"))}if(typeof e.exp<"u"&&typeof t.expiresIn<"u")return o(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(typeof e.nbf<"u"&&typeof t.notBefore<"u")return o(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{gl(t)}catch(u){return o(u)}if(!t.allowInvalidAsymmetricKeyTypes)try{ll(i.alg,r)}catch(u){return o(u)}let a=e.iat||Math.floor(Date.now()/1e3);if(t.noTimestamp?delete e.iat:s&&(e.iat=a),typeof t.notBefore<"u"){try{e.nbf=Ws(t.notBefore,a)}catch(u){return o(u)}if(typeof e.nbf>"u")return o(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(typeof t.expiresIn<"u"&&typeof e=="object"){try{e.exp=Ws(t.expiresIn,a)}catch(u){return o(u)}if(typeof e.exp>"u")return o(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(Ys).forEach(function(u){let h=Ys[u];if(typeof t[u]<"u"){if(typeof e[h]<"u")return o(new Error('Bad "options.'+u+'" option. The payload already has an "'+h+'" property.'));e[h]=t[u]}});let f=t.encoding||"utf8";if(typeof n=="function")n=n&&pl(n),Ks.createSign({header:i,privateKey:r,payload:e,encoding:f}).once("error",n).once("done",function(u){if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)return n(new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`));n(null,u)});else{let u=Ks.sign({header:i,payload:e,secret:r,encoding:f});if(!t.allowInsecureKeySizes&&/^(?:RS|PS)/.test(i.alg)&&u.length<256)throw new Error(`secretOrPrivateKey has a minimum key size of 2048 bits for ${i.alg}`);return u}}});var ni=l((Xh,ti)=>{ti.exports={decode:Ke(),verify:ws(),sign:ri(),JsonWebTokenError:J(),NotBeforeError:Je(),TokenExpiredError:Ye()}});var Al={};pi(Al,{handler:()=>Tl});module.exports=Ei(Al);var oi=require("@aws-sdk/client-dynamodb"),De=require("@aws-sdk/lib-dynamodb");var _e=mi(ni());var si={region:process.env.AWS_REGION??"ap-southeast-2",usersTable:process.env.USERS_TABLE,phoneGsi:process.env.PHONE_GSI??"gsi_phone",jwtSecret:process.env.JWT_SECRET,jwtTtlSec:parseInt(process.env.JWT_TTL_SEC||"7200",10),refreshTable:process.env.REFRESH_TABLE,refreshTtlDays:parseInt(process.env.REFRESH_TTL_DAYS||"30",10),refreshPepper:process.env.REFRESH_PEPPER,avatarsBucket:process.env.AVATARS_BUCKET,avatarMaxBytes:process.env.AVATAR_MAX_BYTES||"2097152",phoneDirTable:process.env.PHONE_DIR_TABLE,twilio:{accountSid:process.env.TWILIO_ACCOUNT_SID,authToken:process.env.TWILIO_AUTH_TOKEN,verifySid:process.env.TWILIO_VERIFY_SID}};var ne=class extends Error{constructor(t,n){super(n??t);this.status=401;this.name="TokenError",this.code=t}};var ii=e=>{try{let t=_e.default.verify(e,si.jwtSecret,{algorithms:["HS256"]});if(!t||typeof t.sub!="string")throw new ne("invalid_token","missing sub claim");return t}catch(r){throw r instanceof _e.default.TokenExpiredError?new ne("token_expired"):r instanceof _e.default.JsonWebTokenError?new ne("invalid_token"):r}};var Rl=De.DynamoDBDocumentClient.from(new oi.DynamoDBClient({})),bl=process.env.CONN_TABLE,Tl=async e=>{let r=e.headers?.authorization??e.headers?.Authorization,t=e.queryStringParameters?.token,n=r?.startsWith("Bearer ")?r.slice(7):t;if(!n)return{statusCode:401,body:"unauthorized"};let s;try{({sub:s}=ii(n))}catch{return{statusCode:401,body:"invalid_token"}}let i=Math.floor(Date.now()/1e3)+300;return await Rl.send(new De.PutCommand({TableName:bl,Item:{connectionId:e.requestContext.connectionId,userId:s,lastSeen:new Date().toISOString(),ttl:i}})),{statusCode:200,body:"ok"}};0&&(module.exports={handler});
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
