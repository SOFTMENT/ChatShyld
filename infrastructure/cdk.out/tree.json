{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.211.0"},"children":{"ChatshyldStack":{"id":"ChatshyldStack","path":"ChatshyldStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.211.0"},"children":{"UsersTable":{"id":"UsersTable","path":"ChatshyldStack/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.211.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","partitionKey":{"name":"*","type":"S"},"projectionType":"ALL"}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"userId","attributeType":"S"},{"attributeName":"phone","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_phone","keySchema":[{"attributeName":"phone","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"userId","keyType":"HASH"}]}}},"ScalingRole":{"id":"ScalingRole","path":"ChatshyldStack/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}}}},"RefreshTokenTable":{"id":"RefreshTokenTable","path":"ChatshyldStack/RefreshTokenTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.211.0","metadata":[{"partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy","timeToLiveAttribute":"*"},{"addGlobalSecondaryIndex":[{"indexName":"*","partitionKey":{"name":"*","type":"S"}}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/RefreshTokenTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"tokenId","attributeType":"S"},{"attributeName":"userId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"gsi_user","keySchema":[{"attributeName":"userId","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"tokenId","keyType":"HASH"}],"timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"ChatshyldStack/RefreshTokenTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}}}},"AvatarBucket":{"id":"AvatarBucket","path":"ChatshyldStack/AvatarBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.211.0","metadata":[{"removalPolicy":"destroy","autoDeleteObjects":true,"blockPublicAccess":"*","publicReadAccess":false,"cors":[{"allowedMethods":["POST","PUT","GET"],"allowedOrigins":"*","allowedHeaders":"*","exposedHeaders":"*","maxAge":"*"}]},{"addCorsRule":[{"allowedMethods":["POST","PUT","GET"],"allowedOrigins":"*","allowedHeaders":"*","exposedHeaders":"*","maxAge":"*"},"*","*"]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/AvatarBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"corsConfiguration":{"corsRules":[{"maxAge":3000,"allowedHeaders":["*"],"allowedMethods":["POST","PUT","GET"],"allowedOrigins":["*"],"exposedHeaders":["ETag"]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":false,"ignorePublicAcls":true,"restrictPublicBuckets":false},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}}},"Policy":{"id":"Policy","path":"ChatshyldStack/AvatarBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.211.0","metadata":[{"bucket":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/AvatarBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"AvatarBucket9BCAEBB3"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["AvatarBucket9BCAEBB3","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["AvatarBucket9BCAEBB3","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AvatarBucket9BCAEBB3","Arn"]},"/avatars/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"ChatshyldStack/AvatarBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.211.0","metadata":["*"]},"children":{"Default":{"id":"Default","path":"ChatshyldStack/AvatarBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"ChatshyldStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.211.0"},"children":{"Staging":{"id":"Staging","path":"ChatshyldStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"Role":{"id":"Role","path":"ChatshyldStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}},"Handler":{"id":"Handler","path":"ChatshyldStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}}}},"SendOtpFn":{"id":"SendOtpFn","path":"ChatshyldStack/SendOtpFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/SendOtpFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/SendOtpFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/SendOtpFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Code":{"id":"Code","path":"ChatshyldStack/SendOtpFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/SendOtpFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/SendOtpFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/SendOtpFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"08647c2f8b4fa77dcc6801833fc7ce2ccff0acfee72aebf4c98e1a5af0ee9585.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["SendOtpFnServiceRoleB9E4E0FE","Arn"]},"runtime":"nodejs22.x","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/SendOtpFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/SendOtpFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"SendOtpFnA6E032A5"}]]},"retentionInDays":731}}}}}}},"VerifyOtpFn":{"id":"VerifyOtpFn","path":"ChatshyldStack/VerifyOtpFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/VerifyOtpFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/VerifyOtpFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/VerifyOtpFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatshyldStack/VerifyOtpFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/VerifyOtpFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["RefreshTokenTable5CB955C2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RefreshTokenTable5CB955C2","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"VerifyOtpFnServiceRoleDefaultPolicy2BA549D8","roles":[{"Ref":"VerifyOtpFnServiceRole76089F2F"}]}}}}}}},"Code":{"id":"Code","path":"ChatshyldStack/VerifyOtpFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/VerifyOtpFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/VerifyOtpFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/VerifyOtpFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"72c0073a49d179180e6b31d13c66f13b584c89c7762cd861e5a70ec7bbe4ad8d.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["VerifyOtpFnServiceRole76089F2F","Arn"]},"runtime":"nodejs22.x","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/VerifyOtpFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/VerifyOtpFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"VerifyOtpFn7C64DA59"}]]},"retentionInDays":731}}}}}}},"RefreshTokenFn":{"id":"RefreshTokenFn","path":"ChatshyldStack/RefreshTokenFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/RefreshTokenFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/RefreshTokenFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/RefreshTokenFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatshyldStack/RefreshTokenFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/RefreshTokenFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/*"]]}]},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["RefreshTokenTable5CB955C2","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["RefreshTokenTable5CB955C2","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"RefreshTokenFnServiceRoleDefaultPolicy8145DA30","roles":[{"Ref":"RefreshTokenFnServiceRole8719035D"}]}}}}}}},"Code":{"id":"Code","path":"ChatshyldStack/RefreshTokenFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/RefreshTokenFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/RefreshTokenFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/RefreshTokenFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"163ccf7aa496fbea85122c0f40965968b02984d5bd818ce8d7fd1e0fe6ac7a9e.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["RefreshTokenFnServiceRole8719035D","Arn"]},"runtime":"nodejs22.x","timeout":5}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/RefreshTokenFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/RefreshTokenFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"RefreshTokenFn26F5D4C4"}]]},"retentionInDays":731}}}}}}},"GetUserFn":{"id":"GetUserFn","path":"ChatshyldStack/GetUserFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/GetUserFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/GetUserFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/GetUserFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatshyldStack/GetUserFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/GetUserFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetUserFnServiceRoleDefaultPolicyC8125AD0","roles":[{"Ref":"GetUserFnServiceRoleFC2429D1"}]}}}}}}},"Code":{"id":"Code","path":"ChatshyldStack/GetUserFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/GetUserFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/GetUserFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/GetUserFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"dea4c12609b3654430f1d8c42f76eb31c9fb7dc78293b95aebff8c905b6cab25.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["GetUserFnServiceRoleFC2429D1","Arn"]},"runtime":"nodejs22.x","timeout":5}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/GetUserFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/GetUserFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"GetUserFn2C6EE015"}]]},"retentionInDays":731}}}}}}},"UpdateUserFn":{"id":"UpdateUserFn","path":"ChatshyldStack/UpdateUserFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/UpdateUserFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/UpdateUserFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/UpdateUserFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatshyldStack/UpdateUserFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/UpdateUserFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["UsersTable9725E9C8","Arn"]},"/index/*"]]}]},{"Action":"s3:DeleteObject*","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AvatarBucket9BCAEBB3","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"UpdateUserFnServiceRoleDefaultPolicy43742191","roles":[{"Ref":"UpdateUserFnServiceRole19495F0B"}]}}}}}}},"Code":{"id":"Code","path":"ChatshyldStack/UpdateUserFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/UpdateUserFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/UpdateUserFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/UpdateUserFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"5d8c82758f807747aba16719b13125a9c2942993365b662eb11af0403b307d65.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["UpdateUserFnServiceRole19495F0B","Arn"]},"runtime":"nodejs22.x","timeout":10}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/UpdateUserFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/UpdateUserFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"UpdateUserFn71C6325C"}]]},"retentionInDays":731}}}}}}},"PresignAvatarFn":{"id":"PresignAvatarFn","path":"ChatshyldStack/PresignAvatarFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.211.0","metadata":[{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{},{},{},{},{},{},{},{},{},{},{"runtime":"*","entry":"*","handler":"*","timeout":"*","environment":"*"}]},"children":{"ServiceRole":{"id":"ServiceRole","path":"ChatshyldStack/PresignAvatarFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.211.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ChatshyldStack/PresignAvatarFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.211.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ChatshyldStack/PresignAvatarFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ChatshyldStack/PresignAvatarFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.211.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/PresignAvatarFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["AvatarBucket9BCAEBB3","Arn"]},"/*"]]}}],"Version":"2012-10-17"},"policyName":"PresignAvatarFnServiceRoleDefaultPolicy8ABFE28E","roles":[{"Ref":"PresignAvatarFnServiceRoleD3436466"}]}}}}}}},"Code":{"id":"Code","path":"ChatshyldStack/PresignAvatarFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.211.0"},"children":{"Stage":{"id":"Stage","path":"ChatshyldStack/PresignAvatarFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.211.0"}},"AssetBucket":{"id":"AssetBucket","path":"ChatshyldStack/PresignAvatarFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.211.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/PresignAvatarFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":{"Fn::Sub":"cdk-hnb659fds-assets-723609008675-${AWS::Region}"},"s3Key":"23a356484dfbfdb895561a44dbf0a5c221502a608ebead8aca8d6107ca23a88a.zip"},"environment":{"variables":{"USERS_TABLE":{"Ref":"UsersTable9725E9C8"},"PHONE_GSI":"gsi_phone","JWT_SECRET":"0c58fe6a71c3663728494eeb159cdf53c3b2098e26f34e67696313a8ce169df7c15d7f7f","JWT_TTL_SEC":"7200","TWILIO_ACCOUNT_SID":"AC256b1843957366ea8489ba3b1e27b34e","TWILIO_AUTH_TOKEN":"6cd7cae52a56c472999d3175a95feb98","TWILIO_VERIFY_SID":"VA8e18efe98dfb145f7ce00492939dd7ca","LOG_LEVEL":"INFO","REFRESH_TABLE":{"Ref":"RefreshTokenTable5CB955C2"},"REFRESH_TTL_DAYS":"30","REFRESH_PEPPER":"M8sAw26xTIoXoUJZdWXMbBgH0u9wNosAMxJ66EA0DVXaMGuoMsGg+tAoKZ4bIrFBYZOxRFvcCqbKdtYJpnHftA==","AVATARS_BUCKET":{"Ref":"AvatarBucket9BCAEBB3"},"AVATAR_MAX_BYTES":"2097152"}},"handler":"index.handler","role":{"Fn::GetAtt":["PresignAvatarFnServiceRoleD3436466","Arn"]},"runtime":"nodejs22.x","timeout":5}}},"LogGroup":{"id":"LogGroup","path":"ChatshyldStack/PresignAvatarFn/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.211.0","metadata":[{"logGroupName":"*"}]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/PresignAvatarFn/LogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":{"Fn::Join":["",["/aws/lambda/",{"Ref":"PresignAvatarFnFCD67BCC"}]]},"retentionInDays":731}}}}}}},"ChatShyldHttpApi":{"id":"ChatShyldHttpApi","path":"ChatshyldStack/ChatShyldHttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.211.0","metadata":["*","*","*","*","*","*","*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["*"],"allowMethods":["*"],"allowOrigins":["*"]},"name":"ChatShyldApi","protocolType":"HTTP"}}},"DefaultStage":{"id":"DefaultStage","path":"ChatshyldStack/ChatShyldHttpApi/DefaultStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/DefaultStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"autoDeploy":true,"stageName":"$default"}}}}},"POST--auth--send-otp":{"id":"POST--auth--send-otp","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--send-otp","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"SendOtpIntegration":{"id":"SendOtpIntegration","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--send-otp/SendOtpIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--send-otp/SendOtpIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["SendOtpFnA6E032A5","Arn"]},"payloadFormatVersion":"2.0"}}}}},"SendOtpIntegration-Permission":{"id":"SendOtpIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--send-otp/SendOtpIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SendOtpFnA6E032A5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/auth/send-otp"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--send-otp/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"POST /auth/send-otp","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiPOSTauthsendotpSendOtpIntegration5796B4DF"}]]}}}}}},"POST--auth--verify-otp":{"id":"POST--auth--verify-otp","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--verify-otp","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"VerifyOtpIntegration":{"id":"VerifyOtpIntegration","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--verify-otp/VerifyOtpIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--verify-otp/VerifyOtpIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["VerifyOtpFn7C64DA59","Arn"]},"payloadFormatVersion":"2.0"}}}}},"VerifyOtpIntegration-Permission":{"id":"VerifyOtpIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--verify-otp/VerifyOtpIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["VerifyOtpFn7C64DA59","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/auth/verify-otp"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--verify-otp/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"POST /auth/verify-otp","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiPOSTauthverifyotpVerifyOtpIntegration8BBC8DD9"}]]}}}}}},"POST--auth--refresh":{"id":"POST--auth--refresh","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"RefreshTokenIntegration":{"id":"RefreshTokenIntegration","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--refresh/RefreshTokenIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--refresh/RefreshTokenIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["RefreshTokenFn26F5D4C4","Arn"]},"payloadFormatVersion":"2.0"}}}}},"RefreshTokenIntegration-Permission":{"id":"RefreshTokenIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--refresh/RefreshTokenIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshTokenFn26F5D4C4","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--auth--refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"POST /auth/refresh","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiPOSTauthrefreshRefreshTokenIntegration910872C9"}]]}}}}}},"GET--profile--me":{"id":"GET--profile--me","path":"ChatshyldStack/ChatShyldHttpApi/GET--profile--me","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"GetUserIntegration":{"id":"GetUserIntegration","path":"ChatshyldStack/ChatShyldHttpApi/GET--profile--me/GetUserIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/GET--profile--me/GetUserIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["GetUserFn2C6EE015","Arn"]},"payloadFormatVersion":"2.0"}}}}},"GetUserIntegration-Permission":{"id":"GetUserIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/GET--profile--me/GetUserIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetUserFn2C6EE015","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/profile/me"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/GET--profile--me/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"GET /profile/me","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiGETprofilemeGetUserIntegration6913437D"}]]}}}}}},"PATCH--profile--me":{"id":"PATCH--profile--me","path":"ChatshyldStack/ChatShyldHttpApi/PATCH--profile--me","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"UpdateUserIntegration":{"id":"UpdateUserIntegration","path":"ChatshyldStack/ChatShyldHttpApi/PATCH--profile--me/UpdateUserIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/PATCH--profile--me/UpdateUserIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["UpdateUserFn71C6325C","Arn"]},"payloadFormatVersion":"2.0"}}}}},"UpdateUserIntegration-Permission":{"id":"UpdateUserIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/PATCH--profile--me/UpdateUserIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["UpdateUserFn71C6325C","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/profile/me"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/PATCH--profile--me/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"PATCH /profile/me","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiPATCHprofilemeUpdateUserIntegration4CF6FBF6"}]]}}}}}},"POST--profile--avatar--presign":{"id":"POST--profile--avatar--presign","path":"ChatshyldStack/ChatShyldHttpApi/POST--profile--avatar--presign","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.211.0","metadata":["*"]},"children":{"PresignAvatarIntegration":{"id":"PresignAvatarIntegration","path":"ChatshyldStack/ChatShyldHttpApi/POST--profile--avatar--presign/PresignAvatarIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--profile--avatar--presign/PresignAvatarIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["PresignAvatarFnFCD67BCC","Arn"]},"payloadFormatVersion":"2.0"}}}}},"PresignAvatarIntegration-Permission":{"id":"PresignAvatarIntegration-Permission","path":"ChatshyldStack/ChatShyldHttpApi/POST--profile--avatar--presign/PresignAvatarIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["PresignAvatarFnFCD67BCC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:",{"Ref":"AWS::Region"},":723609008675:",{"Ref":"ChatShyldHttpApiE87B938B"},"/*/*/profile/avatar/presign"]]}}}},"Resource":{"id":"Resource","path":"ChatshyldStack/ChatShyldHttpApi/POST--profile--avatar--presign/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"authorizationType":"NONE","routeKey":"POST /profile/avatar/presign","target":{"Fn::Join":["",["integrations/",{"Ref":"ChatShyldHttpApiPOSTprofileavatarpresignPresignAvatarIntegration001E4C47"}]]}}}}}}}},"ProdStage":{"id":"ProdStage","path":"ChatshyldStack/ProdStage","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.211.0","metadata":["*"]},"children":{"Resource":{"id":"Resource","path":"ChatshyldStack/ProdStage/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.211.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"apiId":{"Ref":"ChatShyldHttpApiE87B938B"},"autoDeploy":true,"defaultRouteSettings":{"throttlingBurstLimit":50,"throttlingRateLimit":30},"stageName":"prod"}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"ChatshyldStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"ChatshyldStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.211.0"}},"Condition":{"id":"Condition","path":"ChatshyldStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.211.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ChatshyldStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.211.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ChatshyldStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.211.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}